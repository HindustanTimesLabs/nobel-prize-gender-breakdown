<!DOCTYPE html>
<meta charset="utf-8">
<body>
</body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>

var width = window.innerWidth;
var height = window.innerHeight;
// append canvas
var canvas = d3.select("body").append("canvas")
  .attr("width", width)
  .attr("height", height);

var context = canvas.node().getContext("2d");

var colors = {male: "#48a2d7", female: "#e74c3c", org: "#ccc"}

d3.csv("all.csv", function(error, nodes){
  if (error) throw error;

  var simulation = d3.forceSimulation(nodes)
    .force("y1", isolate(d3.forceY(-height / 8), function(d){ return d.type == "medicine" || d.type == "physics" || d.type == "chemistry"; }))
    .force("y2", isolate(d3.forceY(height / 8), function(d){ return d.type == "peace" || d.type == "literature" || d.type == "economic-sciences"; }))
    .force("x1", isolate(d3.forceX(-width / 6), function(d) { return d.type === "medicine" || d.type == "peace"; }))
    .force("x2", isolate(d3.forceX(), function(d) { return d.type === "physics" || d.type == "literature"; }))
    .force("x3", isolate(d3.forceX(width / 6), function(d) { return d.type === "chemistry" || d.type == "economic-sciences"; }))
    .force("charge", d3.forceManyBody().strength(-10))
    .on("tick", ticked);

  function ticked() {
    context.clearRect(0, 0, width, height);
    context.save();
    context.translate(width / 2, height / 2);
    nodes.forEach(drawNode);
    context.restore();
  }

  function drawNode(d) {
    context.beginPath();
    context.moveTo(d.x, d.y);
    context.arc(d.x, d.y, 7, 0, 2 * Math.PI);
    context.fillStyle = colors[d.gender];
    context.fill();
  }

  function isolate(force, filter) {
    var initialize = force.initialize;
    force.initialize = function() { initialize.call(force, nodes.filter(filter)); };
    return force;
  }


});




</script>
